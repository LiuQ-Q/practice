### 加载和执行（Loading and Exeution）

管理浏览器中的 JavaScript 代码是个很棘手的问题，因为代码执行过程会阻塞浏览器的其他进程，比如用户界面的绘制。每次遇到 `<script>` 标签，页面都必须停下来等待代码下载（如果是外链文件）并执行，然后继续处理其他部分。尽管如此，还是有几种方法能减少 JavaScript 对性能的影响：

* `</body>` 闭合标签之前，将所有的 `<script>` 标签放到页面底部。这能确保在脚本执行之前页面已经完成了渲染。
* 合并脚本。页面中的 `<script>` 标签越少，加载也就越快，响应也更迅速。无论外链文件还是内嵌脚本都是如此。
* 有多种阻塞下载 JavaScript 的方法：
    * 使用 `<script>` 标签的 defer 属性；
    * 使用动态创建的 `<script>` 元素来下载并执行代码；
    * 使用 XHR 对象下载 JavaScript 代码并注入页面中。

### 数据存取（Data Access）

在 JavaScript 中，数据存储的位置会对代码整体性能产生重大的影响。数据存储共有 4 种方式：字面量、变量、数组项、对象成员。他们有着各自的性能特点。

* 访问字面量和局部变量的速度最快，相反，访问数组元素和对象成员相对较慢。
* 由于局部变量存在于作用域链的起始位置，因此访问局部变量比访问跨作用域变量更快。变量在作用域链中的位置越深，访问所需时间就越长。由于全局变量总处在作用域链的末端，因此访问速度也是最慢的。
* 避免使用 with 语句，因为它会改变执行环境作用域链。同样，try-catch 语句中的 catch 子句也有同样的影响，因此也要小心使用。
* 嵌套的对象成员会明显影响性能，尽量少用。
* 属性或方法在原型链中的位置越深，访问它的速度也越慢。
* 通常来说，你可以通过把常用的对象成员、数组元素、跨域变量保存在局部变量中来改善 JavaScript 性能，因为局部变量访问速度更快。

### DOM 编程（DOM Scripting）

访问和操作 DOM 是现代 Web 应用的重要部分，但每次穿越连接 ECMAScript 和 DOM 两个岛屿之间的桥梁，都会被收取“过桥费”，为了减少 DOM 变成带来的性能损失，请记住一下几点：

* 最小化 DOM 访问次数，尽可能，尽可能在 JavaScript 端处理。
* 如果需要多次访问某个 DOM 节点，请使用局部变量存储它的引用。
* 小心处理 HTML 集合，因为它实时联系着底层文档，把集合的长度缓存到一个变量中，并在迭代中使用它。如果需要经常操作集合，建议把它拷贝到一个数组中。
* 如果可能的话，使用速度更快的 API，比如 querySelectAll() 和 firstElementChild。
* 要留意重绘和重排，批量修改样式时，“离线”操作 DOM 数，使用缓存，并减少访问布局信息的次数。
* 动画中使用绝对定位，使用拖放代理。
* 使用事件委托来减少事件处理器的数量。

### 算法和流程控制（Algorithms and Flow Control）

JavaScript 和其他语言一样，代码的写法和算法会影响运行时间，与其他语言不同的是，JavaScript 可用资源有限，因此优化技术更为重要。

* for、while 和 do-while 循环性能相当，并没有一种循环类型明显快于或慢于其他类型。
* 避免使用 for-in 循环，除非你需要遍历一个属性数量未知的对象。
* 改善循环性能的最佳方式是减少每次迭代的运算量和减少循环迭代次数。
* 通常来说，switch 总是比 if-else 更快，但并不总是最佳解决方案。
* 在判断条件较多时，使用查找表比 if-else 和 switch 更快。
* 浏览器的调用栈大小限制了递归算法在 JavaScript 中的应用，栈溢出错误会导致其他代码运行中断。
* 如果你遇到栈溢出错误，可将方法改为迭代算法，或使用 Memoization 来避免重复计算。

### 字符串和正则表达式（Strings and Regular Expressions）

密集的字符串操作和草率的编写正则表达式可能产生严重的性能障碍

* 当谅解数量巨大或尺寸巨大的字符串时，数组项合并是唯一在 IE7 及更在版本中性能合理的方法。
* 如果不需考虑 IE7 及更早版本的性能，数组项合并是最慢的字符串连接方法之一。推荐使用简单的 + 和 += 操作符替代，避免不必要的中间字符串。
* 回溯既是正则表达式匹配功能的基本组成部分，也是正则表达式的低效之源。
* 回溯失控发生在正则表达式本应快速匹配的地方，但因为某些特殊的字符串匹配动作导致运行缓慢甚至浏览器崩溃。避免这个问题的办法是：使相邻的子元互斥，避免嵌套量词对同一字符串的相同部分多次匹配，通过重复利用预查的原子组去除不必要的回溯。
* 提高正则表达式效率的各种技术手段会有助于正则表达式更快的匹配，并在非匹配位置上花更少的时间。
* 正则表达式并不总是完成工作的最佳工具，尤其是你只搜索字面字符串的时候。
* 尽管有许多方法可以去除字符串的首尾空白，但使用两个简单的正则表达式（一个用来去除头部空白，另一个用来去除尾部空白）来处理大量字符串内容能提供一个简洁而跨浏览器的方法，从字符串末尾开始循环向前搜索第一个非空白字符串，或者将此技术同正则表达式结合起来，会提供一个更好的代替方案，它很少受到字符串长度影响。

### 快速响应的用户界面（Responsive Interfaces）

JavaScript 和用户界面更新在同一个进程中运行，因此一次只能处理一件事情。这意味着当 JavaScript 代码正在运行时，用户界面不能响应输入，反之亦然。高效的管理 UI 线程就是要确保 JavaScript 不能运行太长时间，以免影响用户体验。

* 任何 JavaScript 任务都不应当执行超过 100 毫秒。过长的运行时间会导致 UI 更新出现明显的延迟，从何对用户体验产生负面影响。
* JavaScript 运行期间，浏览器响应用户交互的行为存在差异。无论如何，JavaScript 长时间运行将导致用户体验变得混乱和脱节。
* 定时器可用来安排代码延迟执行，它使得你可以把长时间运行脚本分解成一系列的小任务。
* Web Workers 是新版浏览器支持的特性，它允许你在 UI 线程外部执行 JavaScript 代码，从而避免锁定 UI。

### Ajax

### 编程实践（Programming Practices）